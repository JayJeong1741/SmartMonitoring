<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>신호등 모니터링 - 목록</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans">
<!-- 네비게이션 바 -->
<nav class="bg-white shadow-lg fixed w-full z-10">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between h-16">
            <div class="flex items-center">
                <h1 class="text-2xl font-extrabold text-gray-800">스마트 모니터링</h1>
            </div>
            <div class="flex items-center space-x-4">
                <a th:href="@{/trafficLight/dashboard}" class="text-gray-600 hover:text-blue-500 font-semibold">대시보드</a>
                <a th:href="@{/trafficLight/trafficList}" class="text-gray-600 hover:text-blue-500">신호등 목록</a>
                <a th:href="@{/user/logout}" class="text-gray-600 hover:text-blue-500">로그아웃</a>
            </div>
        </div>
    </div>
</nav>

<!-- 신호등 목록 -->
<section class="pt-20 pb-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center mb-6">
        <h2 class="text-3xl font-bold text-gray-800">신호등 목록</h2>
        <div class="relative">
            <input type="text" id="search" placeholder="신호등 ID 또는 위치 검색" class="pl-10 pr-4 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
            <span class="absolute left-3 top-2.5 text-gray-400"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg></span>
        </div>
    </div>
    <div id="trafficList" class="space-y-4">


        <div th:each="trafficLight : ${trafficLights}" class="bg-white p-4 rounded-lg shadow-md hover:shadow-lg transition duration-200 mb-4">
            <div class="flex items-center justify-between">
                <div class="flex-1">
                    <a th:href="@{/trafficLight/trafficDetail(id=${trafficLight.id.id},cid=${trafficLight.id.cid})}" class="text-blue-500 hover:underline font-semibold"
                       th:text="${trafficLight.id.id}">
                    </a>
                </div>
                <div class="flex-1 text-gray-600">
                    <span th:text="${trafficLight.sName}">광화문</span>
                </div>
                <div class="flex-1">
            <span class="inline-flex items-center px-2 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800">
                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                </svg>
                정상
            </span>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    // 검색 기능 (클라이언트 측 필터링 예시)
    document.getElementById('search').addEventListener('input', (e) => {
        const query = e.target.value.toLowerCase();
        const rows = document.querySelectorAll('#trafficList > div');
        rows.forEach(row => {
            const id = row.querySelector('a').textContent.toLowerCase();
            const location = row.querySelector('div:nth-child(2)').textContent.toLowerCase();
            row.style.display = (id.includes(query) || location.includes(query)) ? '' : 'none';
        });
    });
</script>
</body>
</html>